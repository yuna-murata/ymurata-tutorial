import{r as i,R as h,t as F}from"./index.t6I50wh0.js";import{n as y,a as p}from"./use-sync-refs.Bp3VvZK7.js";function E(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(n=>setTimeout(()=>{throw n}))}function f(){let e=[],n={addEventListener(t,r,s,a){return t.addEventListener(r,s,a),n.add(()=>t.removeEventListener(r,s,a))},requestAnimationFrame(...t){let r=requestAnimationFrame(...t);return n.add(()=>cancelAnimationFrame(r))},nextFrame(...t){return n.requestAnimationFrame(()=>n.requestAnimationFrame(...t))},setTimeout(...t){let r=setTimeout(...t);return n.add(()=>clearTimeout(r))},microTask(...t){let r={current:!0};return E(()=>{r.current&&t[0]()}),n.add(()=>{r.current=!1})},style(t,r,s){let a=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:s}),this.add(()=>{Object.assign(t.style,{[r]:a})})},group(t){let r=f();return t(r),this.add(()=>r.dispose())},add(t){return e.includes(t)||e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let t of e.splice(0))t()}};return n}function S(){let[e]=i.useState(f);return i.useEffect(()=>()=>e.dispose(),[e]),e}function x(e=0){let[n,t]=i.useState(e),r=i.useCallback(l=>t(l),[n]),s=i.useCallback(l=>t(u=>u|l),[n]),a=i.useCallback(l=>(n&l)===l,[n]),c=i.useCallback(l=>t(u=>u&~l),[t]),o=i.useCallback(l=>t(u=>u^l),[t]);return{flags:n,setFlag:r,addFlag:s,hasFlag:a,removeFlag:c,toggleFlag:o}}var A=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(A||{});function P(e){let n={};for(let t in e)e[t]===!0&&(n[`data-${t}`]="");return n}function H(e,n,t,r){let[s,a]=i.useState(t),{hasFlag:c,addFlag:o,removeFlag:l}=x(e&&s?3:0),u=i.useRef(!1),d=i.useRef(!1),C=S();return y(()=>{var g;if(e){if(t&&a(!0),!n){t&&o(3);return}return(g=r?.start)==null||g.call(r,t),k(n,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(t?(o(3),l(4)):(o(4),l(2)))},run(){d.current?t?(l(3),o(4)):(l(4),o(3)):t?l(1):o(1)},done(){var v;d.current&&typeof n.getAnimations=="function"&&n.getAnimations().length>0||(u.current=!1,l(7),t||a(!1),(v=r?.end)==null||v.call(r,t))}})}},[e,t,n,C]),e?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function k(e,{prepare:n,run:t,done:r,inFlight:s}){let a=f();return b(e,{prepare:n,inFlight:s}),a.nextFrame(()=>{t(),a.requestAnimationFrame(()=>{a.add(O(e,r))})}),a.dispose}function O(e,n){let t=f();if(!e)return t.dispose;let r=!1;t.add(()=>{r=!0});let s=e.getAnimations().filter(a=>a instanceof CSSTransition);return s.length===0?(n(),t.dispose):(Promise.allSettled(s.map(a=>a.finished)).then(()=>{r||n()}),t.dispose)}function b(e,{inFlight:n,prepare:t}){if(n!=null&&n.current){t();return}let r=e.style.transition;e.style.transition="none",t(),e.offsetHeight,e.style.transition=r}let m=i.createContext(null);m.displayName="OpenClosedContext";var q=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(q||{});function R(){return i.useContext(m)}function j({value:e,children:n}){return h.createElement(m.Provider,{value:e},n)}function M({children:e}){return h.createElement(m.Provider,{value:null},e)}function $(){let e=typeof document>"u";return"useSyncExternalStore"in F?(n=>n.useSyncExternalStore)(F)(()=>()=>{},()=>!1,()=>!e):!1}function N(){let e=$(),[n,t]=i.useState(p.isHandoffComplete);return n&&p.isHandoffComplete===!1&&t(!1),i.useEffect(()=>{n!==!0&&t(!0)},[n]),i.useEffect(()=>p.handoff(),[]),e?!1:n}export{P as H,j as c,q as i,H as j,N as l,f as o,S as p,M as s,E as t,R as u};
