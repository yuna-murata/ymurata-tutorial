import{j as d}from"./jsx-runtime.DgEt2rpa.js";import{r,R as b}from"./index.t6I50wh0.js";import{l as J,u as ee,i as F,p as he,j as me,H as ve,c as be}from"./use-server-handoff-complete.DAeTP5Ef.js";import{n as N,W as D,y as te,o as E,H as re,s as ge,O as y,u as ne,m as we,t as xe,M as $e}from"./use-sync-refs.Bp3VvZK7.js";import{F as je}from"./XMarkIcon.Dh-2ucm4.js";function pe({title:e,titleId:t,...n},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ce=r.forwardRef(pe);function Ee(){let e=r.useRef(!1);return N(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:se)!==r.Fragment||b.Children.count(e.children)===1}let U=r.createContext(null);U.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function Te(){let e=r.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ye(){let e=r.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=r.createContext(null);A.displayName="NestingContext";function I(e){return"children"in e?I(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ae(e,t){let n=ge(e),s=r.useRef([]),m=Ee(),x=he(),l=E((u,a=y.Hidden)=>{let o=s.current.findIndex(({el:i})=>i===u);o!==-1&&(ne(a,{[y.Unmount](){s.current.splice(o,1)},[y.Hidden](){s.current[o].state="hidden"}}),x.microTask(()=>{var i;!I(s)&&m.current&&((i=n.current)==null||i.call(n))}))}),R=E(u=>{let a=s.current.find(({el:o})=>o===u);return a?a.state!=="visible"&&(a.state="visible"):s.current.push({el:u,state:"visible"}),()=>l(u,y.Unmount)}),$=r.useRef([]),v=r.useRef(Promise.resolve()),g=r.useRef({enter:[],leave:[]}),j=E((u,a,o)=>{$.current.splice(0),t&&(t.chains.current[a]=t.chains.current[a].filter(([i])=>i!==u)),t?.chains.current[a].push([u,new Promise(i=>{$.current.push(i)})]),t?.chains.current[a].push([u,new Promise(i=>{Promise.all(g.current[a].map(([T,P])=>P)).then(()=>i())})]),a==="enter"?v.current=v.current.then(()=>t?.wait.current).then(()=>o(a)):o(a)}),p=E((u,a,o)=>{Promise.all(g.current[a].splice(0).map(([i,T])=>T)).then(()=>{var i;(i=$.current.shift())==null||i()}).then(()=>o(a))});return r.useMemo(()=>({children:s,register:R,unregister:l,onStart:j,onStop:p,wait:v,chains:g}),[R,l,s,j,p,g,v])}let se=r.Fragment,ie=$e.RenderStrategy;function Fe(e,t){var n,s;let{transition:m=!0,beforeEnter:x,afterEnter:l,beforeLeave:R,afterLeave:$,enter:v,enterFrom:g,enterTo:j,entered:p,leave:u,leaveFrom:a,leaveTo:o,...i}=e,[T,P]=r.useState(null),c=r.useRef(null),h=le(e),oe=te(...h?[c,t,P]:t===null?[]:[t]),G=(n=i.unmount)==null||n?y.Unmount:y.Hidden,{show:w,appear:K,initial:Q}=Te(),[C,B]=r.useState(w?"visible":"hidden"),V=ye(),{register:M,unregister:k}=V;N(()=>M(c),[M,c]),N(()=>{if(G===y.Hidden&&c.current){if(w&&C!=="visible"){B("visible");return}return ne(C,{hidden:()=>k(c),visible:()=>M(c)})}},[C,c,M,k,w,G]);let W=J();N(()=>{if(h&&W&&C==="visible"&&c.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[c,C,W,h]);let de=Q&&!K,Y=K&&w&&Q,X=r.useRef(!1),L=ae(()=>{X.current||(B("hidden"),k(c))},V),Z=E(_=>{X.current=!0;let O=_?"enter":"leave";L.onStart(c,O,H=>{H==="enter"?x?.():H==="leave"&&R?.()})}),q=E(_=>{let O=_?"enter":"leave";X.current=!1,L.onStop(c,O,H=>{H==="enter"?l?.():H==="leave"&&$?.()}),O==="leave"&&!I(L)&&(B("hidden"),k(c))});r.useEffect(()=>{h&&m||(Z(w),q(w))},[w,h,m]);let ce=!(!m||!h||!W||de),[,f]=me(ce,T,w,{start:Z,end:q}),fe=we({ref:oe,className:((s=xe(i.className,Y&&v,Y&&g,f.enter&&v,f.enter&&f.closed&&g,f.enter&&!f.closed&&j,f.leave&&u,f.leave&&!f.closed&&a,f.leave&&f.closed&&o,!f.transition&&w&&p))==null?void 0:s.trim())||void 0,...ve(f)}),S=0;return C==="visible"&&(S|=F.Open),C==="hidden"&&(S|=F.Closed),f.enter&&(S|=F.Opening),f.leave&&(S|=F.Closing),b.createElement(A.Provider,{value:L},b.createElement(be,{value:S},re({ourProps:fe,theirProps:i,defaultTag:se,features:ie,visible:C==="visible",name:"Transition.Child"})))}function Ne(e,t){let{show:n,appear:s=!1,unmount:m=!0,...x}=e,l=r.useRef(null),R=le(e),$=te(...R?[l,t]:t===null?[]:[t]);J();let v=ee();if(n===void 0&&v!==null&&(n=(v&F.Open)===F.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,j]=r.useState(n?"visible":"hidden"),p=ae(()=>{n||j("hidden")}),[u,a]=r.useState(!0),o=r.useRef([n]);N(()=>{u!==!1&&o.current[o.current.length-1]!==n&&(o.current.push(n),a(!1))},[o,n]);let i=r.useMemo(()=>({show:n,appear:s,initial:u}),[n,s,u]);N(()=>{n?j("visible"):!I(p)&&l.current!==null&&j("hidden")},[n,p]);let T={unmount:m},P=E(()=>{var h;u&&a(!1),(h=e.beforeEnter)==null||h.call(e)}),c=E(()=>{var h;u&&a(!1),(h=e.beforeLeave)==null||h.call(e)});return b.createElement(A.Provider,{value:p},b.createElement(U.Provider,{value:i},re({ourProps:{...T,as:r.Fragment,children:b.createElement(ue,{ref:$,...T,...x,beforeEnter:P,beforeLeave:c})},theirProps:{},defaultTag:r.Fragment,features:ie,visible:g==="visible",name:"Transition"})))}function Pe(e,t){let n=r.useContext(U)!==null,s=ee()!==null;return b.createElement(b.Fragment,null,!n&&s?b.createElement(z,{ref:t,...e}):b.createElement(ue,{ref:t,...e}))}let z=D(Ne),ue=D(Fe),Se=D(Pe),He=Object.assign(z,{Child:Se,Root:z});const Me=(e,t)=>e.data.autogenerate.type==="home"?t?`/${t}`:"/":e.data.autogenerate.enabled?`${t?`/${t}`:""}/events/${e.data.slug||e.id}`:`${t?`/${t}`:""}/pages/${e.data.slug||e.id}`,Ie=e=>{const[t,n]=r.useState(!1),s=r.useMemo(()=>e.pages.find(l=>l.data.autogenerate.type==="home")?.id,[e.pages]),m=r.useMemo(()=>`${e.baseUrl?`/${e.baseUrl}`:""}/tags`===e.url.pathname,[e.baseUrl,e.url]),x=l=>m?!1:!e.slug&&l.id===s?!0:e.slug&&(e.slug===l.data.slug||e.slug===l.id);return d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>n(!t),type:"button",children:d.jsx(Ce,{className:"w-8 h-8"})}),t&&d.jsx("div",{className:"absolute top-0 left-0 h-dvh w-dvw",onClick:()=>n(!1)}),d.jsx(He,{show:t,children:d.jsxs("div",{className:"shadow absolute top-0 left-0 h-dvh w-80 bg-white w-10 transition duration-200 ease-in-out data-[closed]:-translate-x-full text-black text-sm overflow-y-auto",children:[d.jsx("div",{className:"flex w-full h-24 justify-end px-8",children:d.jsx("button",{type:"button",onClick:()=>n(!1),children:d.jsx(je,{className:"w-8 h-8"})})}),e.pages.map(l=>d.jsx("a",{href:Me(l,e.baseUrl),children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:`${x(l)?"font-bold":""} ${l.data.parent?"ml-6":""}`,title:l.data.title,children:l.data.title},l.id)})},l.id)),e.project.data.project.tags&&e.project.data.project.tags.tags.length>0&&d.jsx("a",{href:`${e.baseUrl?`/${e.baseUrl}`:""}/tags`,children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:m?"font-bold":"",children:"Index"})})})]})})]})};export{Ie as default};
